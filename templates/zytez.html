<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Admin Paneli</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
  <script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>
</head>
<body class="admin-body">

  <!-- ğŸ“ Yeni YazÄ± -->
  <div class="form-container">
    <h1>ğŸ“ Yeni Blog YazÄ±sÄ± Ekle</h1>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="flash">{{ message }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <form method="POST" action="{{ url_for('zytez_add_post') }}">
      <input type="text" name="title" placeholder="BaÅŸlÄ±k" required>
      <div id="editor" class="editor"></div>
      <input type="hidden" name="content" id="hidden-content">
      <input type="submit" value="Kaydet">
    </form>
  </div>

  <!-- ğŸ—‘ï¸ Silme Kutusu -->
  <div class="form-container delete-container">
    <h2>ğŸ—‘ï¸ Blog YazÄ±sÄ± Sil</h2>
    <form method="POST" action="{{ url_for('zytez_delete_post') }}">
      <input type="text" name="title" placeholder="Silinecek yazÄ±nÄ±n baÅŸlÄ±ÄŸÄ±" required>
      <input type="submit" value="Sil" class="delete-btn">
    </form>
  </div>

  <!-- ğŸšª Logout -->
  <div class="form-container logout-container">
    <a href="{{ url_for('logout') }}" class="logout-link">ğŸšª Ã‡Ä±kÄ±ÅŸ Yap</a>
  </div>
  <div class="db-admin-wrapper">

    <!-- Backup -->
    <div class="db-card">
        <h3>ğŸ“¦ VeritabanÄ± YedeÄŸi Al</h3>
        <p>Mevcut veritabanÄ±nÄ±zÄ± indirilebilir dosya olarak alÄ±n.</p>
        <a href="/backup" class="db-btn">Yedek Ä°ndir</a>
    </div>

    <!-- Dump -->
    <div class="db-card">
        <h3>ğŸ§¾ Dump Al</h3>
        <p>VeritabanÄ± dump dosyasÄ±nÄ± oluÅŸturur ve indirmenizi saÄŸlar.</p>
        <a href="/dump" class="db-btn">Dump OluÅŸtur</a>
    </div>

    <!-- Update -->
    <div class="db-card">
        <h3>ğŸ› ï¸ Dump YÃ¼kle (DB GÃ¼ncelle)</h3>
        <p>BilgisayarÄ±nÄ±zdan dump seÃ§ip veritabanÄ±nÄ± gÃ¼ncelleyin.</p>

        <form action="/update" method="post" enctype="multipart/form-data">
            <input type="file" name="dumpfile" class="file-input" required>
            <button type="submit" class="db-btn">DB'yi GÃ¼ncelle</button>
        </form>
    </div>

</div>

  <!-- Quill & Resize -->
  <script src="https://cdn.jsdelivr.net/npm/quill-image-resize-module@3.0.0/image-resize.min.js"></script>
  <script>
    var quill = new Quill('#editor', {
      theme: 'snow',
      placeholder: 'YazÄ±nÄ±zÄ± buraya yazÄ±n...',
      modules: {
        toolbar: [
          [{ 'header': [1, 2, 3, false] }],
          ['bold', 'italic', 'underline', 'strike'],
          [{ 'color': [] }, { 'background': [] }],
          ['link', 'image'],
          [{ 'list': 'ordered' }, { 'list': 'bullet' }],
          ['clean']
        ],
        imageResize: { modules: [ 'Resize', 'DisplaySize', 'Toolbar' ] }
      }
    });

    var clipboard = quill.getModule('clipboard');
    clipboard.addMatcher(Node.ELEMENT_NODE, function(node, delta) { return delta; });

    document.querySelector("form").onsubmit = function() {
      document.querySelector("#hidden-content").value = quill.root.innerHTML;
    };
  </script>
</body>
</html>